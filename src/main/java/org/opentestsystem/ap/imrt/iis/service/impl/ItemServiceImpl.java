package org.opentestsystem.ap.imrt.iis.service.impl;

import org.opentestsystem.ap.common.rest.item.ItemCommitResponse;
import org.opentestsystem.ap.common.rest.item.ItemEntityResponse;
import org.opentestsystem.ap.imrt.iis.repository.RemoteItemRepository;
import org.opentestsystem.ap.imrt.iis.service.ItemService;
import org.springframework.stereotype.Service;

import java.util.List;
import java.util.Optional;
import java.util.UUID;

@Service
public class ItemServiceImpl implements ItemService {
    private final RemoteItemRepository remoteItemRepository;

    public ItemServiceImpl(final RemoteItemRepository remoteItemRepository) {
        this.remoteItemRepository = remoteItemRepository;
    }

    @Override
    public Optional<ItemEntityResponse> findItemEntityById(UUID commitId) {
        return remoteItemRepository.findItemEntityById(commitId);
    }

    @Override
    public ItemCommitResponse findMasterItemCommitsSinceCommit(int itemId, UUID fromCommitId) {
        return remoteItemRepository.findMasterItemCommitsSinceCommit(itemId, fromCommitId);
    }

    @Override
    public List<String> getItemIdsInItemBank() {
        return remoteItemRepository.getItemIdsInItemBank();
    }

    @Override
    public Optional<ItemEntityResponse> findLatestItemEntityByItemId(final int itemId) {
        return remoteItemRepository.findLatestItemEntityByItemId(String.valueOf(itemId));
    }

    @Override
    public Optional<ItemCommitResponse> findAllCommits(final int itemId) {
        return remoteItemRepository.findCommits(String.valueOf(itemId));
    }
}
