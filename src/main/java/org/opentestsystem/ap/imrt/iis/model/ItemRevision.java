package org.opentestsystem.ap.imrt.iis.model;

import org.opentestsystem.ap.common.imrt.model.Attachment;
import org.opentestsystem.ap.common.imrt.model.BaseItem;
import org.opentestsystem.ap.common.imrt.model.ContentUpdateNeed;
import org.opentestsystem.ap.common.imrt.model.ItemAssignment;
import org.opentestsystem.ap.common.imrt.model.ItemGitInformation;
import org.opentestsystem.ap.common.imrt.model.ItemLog;

import java.util.Optional;
import java.util.Set;

public class ItemRevision {
    private final ItemGitInformation itemGitInformation;
    private final BaseItem baseItem;
    private final ItemLog itemLog;
    private final Integer linkedStimulusId;
    private final boolean existingItem;
    private final Set<ItemAssignment> itemAssignments;
    private final Set<Attachment> attachments;
    private final Set<ContentUpdateNeed> contentUpdateNeeds;

    private ItemRevision(final ItemGitInformation itemGitInformation,
                         final BaseItem baseItem,
                         final Integer linkedStimulusId,
                         final ItemLog itemLog,
                         final boolean existingItem, Set<ItemAssignment> itemAssignments, Set<Attachment> attachments, Set<ContentUpdateNeed> contentUpdateNeeds) {
        this.itemGitInformation = itemGitInformation;
        this.baseItem = baseItem;
        this.linkedStimulusId = linkedStimulusId;
        this.itemLog = itemLog;
        this.existingItem = existingItem;
        this.itemAssignments = itemAssignments;
        this.attachments = attachments;
        this.contentUpdateNeeds = contentUpdateNeeds;
    }

    public ItemGitInformation getItemGitInformation() {
        return itemGitInformation;
    }

    public BaseItem getItem() {
        return baseItem;
    }

    public Optional<Integer> getLinkedStimulusId() {
        return Optional.ofNullable(linkedStimulusId);
    }

    public ItemLog getItemLog() {
        return itemLog;
    }

    public boolean isExistingItem() {
        return existingItem;
    }

    public Set<ItemAssignment> getItemAssignments() {
        return itemAssignments;
    }

    public Set<Attachment> getAttachments() {
        return attachments;
    }

    public Set<ContentUpdateNeed> getContentUpdateNeeds() {
        return contentUpdateNeeds;
    }

    public static ItemRevisionModelBuilder builder() {
        return new ItemRevisionModelBuilder();
    }

    public static final class ItemRevisionModelBuilder {
        private ItemGitInformation itemGitInformation;
        private BaseItem baseItem;
        private Integer linkedStimulusId;
        private ItemLog itemLog;
        private boolean existingItem;

        private ItemRevisionModelBuilder() {
        }

        public ItemRevisionModelBuilder withItemGitInformation(ItemGitInformation itemGitInformation) {
            this.itemGitInformation = itemGitInformation;
            return this;
        }

        public ItemRevisionModelBuilder withBaseItem(BaseItem baseItem) {
            this.baseItem = baseItem;
            return this;
        }

        public ItemRevisionModelBuilder withLinkedStimulusId(Integer linkedStimulusId) {
            this.linkedStimulusId = linkedStimulusId;
            return this;
        }

        public ItemRevisionModelBuilder withItemLog(ItemLog itemLog) {
            this.itemLog = itemLog;
            return this;
        }

        public ItemRevisionModelBuilder withExistingItem(boolean existingItem) {
            this.existingItem = existingItem;
            return this;
        }



        public ItemRevision build() {
            return new ItemRevision(itemGitInformation,
                    baseItem,
                    linkedStimulusId,
                    itemLog,
                    existingItem, itemAssignments, attachments, contentUpdateNeeds);
        }
    }
}