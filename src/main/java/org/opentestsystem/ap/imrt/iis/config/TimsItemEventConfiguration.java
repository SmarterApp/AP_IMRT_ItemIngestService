package org.opentestsystem.ap.imrt.iis.config;

import org.opentestsystem.ap.common.imrt.service.OperationalEventService;
import org.opentestsystem.ap.common.management.ItemEventHandler;
import org.opentestsystem.ap.common.management.ItemManagerEventConsumer;
import org.opentestsystem.ap.imrt.iis.event.TimsItemEventHandler;
import org.opentestsystem.ap.imrt.iis.service.ItemWorkQueueService;
import org.springframework.boot.autoconfigure.condition.ConditionalOnMissingBean;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;

@Configuration
public class TimsItemEventConfiguration {

    @Bean
    public ItemEventHandler itemEventHandler(ItemWorkQueueService itemWorkQueueService, OperationalEventService operationalEventService) {
        return new TimsItemEventHandler(itemWorkQueueService, operationalEventService);
    }

    @Bean
    @ConditionalOnMissingBean
    public ItemManagerEventConsumer itemManagerEventConsumer(TimsItemEventHandler itemEventHandler) {
        return new ItemManagerEventConsumer(itemEventHandler);
    }

}
