package org.opentestsystem.ap.imrt.iis.util;

import com.fasterxml.jackson.databind.ObjectMapper;
import org.opentestsystem.ap.common.model.Item;
import org.opentestsystem.ap.imrt.iis.exception.ItemParserException;
import org.springframework.stereotype.Component;

import java.io.IOException;

/**
 * Utility class for item related methods
 */
@Component
public class ItemParser {
    private final ObjectMapper objectMapper;

    public ItemParser(final ObjectMapper objectMapper) {
        this.objectMapper = objectMapper;
    }

    /**
     * Parse an item from a byte array
     *
     * @param json Byte array containing the json represenation of the item.
     * @return Item object.
     */
    public Item readItem(final byte[] json) {
        try {
            return objectMapper.readValue(json, Item.class);
        } catch (final IOException e) {
            throw new ItemParserException("Error reading item to JSON", e);
        }
    }

}
