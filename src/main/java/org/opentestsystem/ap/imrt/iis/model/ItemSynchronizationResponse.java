package org.opentestsystem.ap.imrt.iis.model;

/**
 * Report the number of items affected by the item synchronization process.
 */
public class ItemSynchronizationResponse extends ItemIngestJobResponse {
    private final int numberOfItemsWithoutWebhook;
    private final int numberOfItemsDeletedFromImrt;
    private final int lastItemIdProcessed;

    public ItemSynchronizationResponse(final int numberOfItemsWithoutProjectWebhook,
                                       final int numberOfProjectIds,
                                       final int numberOfItemsDeletedFromImrt,
                                       final int lastItemIdProcessed) {
        super(numberOfProjectIds);
        this.numberOfItemsWithoutWebhook = numberOfItemsWithoutProjectWebhook;
        this.numberOfItemsDeletedFromImrt = numberOfItemsDeletedFromImrt;
        this.lastItemIdProcessed = lastItemIdProcessed;

    }

    /**
     * @return The number of items that did not have a project webhook, thus had a project webhook as part of the item
     * synchronization process.
     */
    public int getNumberOfItemsWithoutWebhook() {
        return numberOfItemsWithoutWebhook;
    }

    /**
     * @return The total number of items that were deleted from IMRT because they no longer exist in source control
     */
    public int getNumberOfItemsDeletedFromImrt() {
        return numberOfItemsDeletedFromImrt;
    }

    @Override
    public String toString() {
        return String.format("%s, number of items requiring project webhook: %d, number of items deleted from IMRT: %d, last item processed %d",
                super.toString(),
                getNumberOfItemsWithoutWebhook(),
                getNumberOfItemsDeletedFromImrt(),
                lastItemIdProcessed);
    }
}
