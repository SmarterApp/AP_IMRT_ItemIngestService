package org.opentestsystem.ap.imrt.iis.model;

/**
 * Report the number of items affected by the item synchronization process.
 */
public class ItemSynchronizationResponse {
    private final int numberOfItemsWithoutWebhook;
    private final int numberOfItembankIds;
    private final int numberOfItemsDeletedFromImrt;
    public static final String EXECUTION_CONTEXT_DATA_KEY = "resposne";

    public ItemSynchronizationResponse(final int numberOfItemsWithoutProjectWebhook,
                                       final int numberOfProjectIds,
                                       final int numberOfItemsDeletedFromImrt) {
        this.numberOfItemsWithoutWebhook = numberOfItemsWithoutProjectWebhook;
        this.numberOfItembankIds = numberOfProjectIds;
        this.numberOfItemsDeletedFromImrt = numberOfItemsDeletedFromImrt;
    }

    /**
     * @return The number of items that did not have a project webhook, thus had a project webhook as part of the item
     * synchronization process.
     */
    public int getNumberOfItemsWithoutWebhook() {
        return numberOfItemsWithoutWebhook;
    }

    /**
     * @return The total number of item bank ids fetched from source control and processed by the item synchronization
     * process.
     */
    public int getNumberOfItembankIds() {
        return numberOfItembankIds;
    }

    /**
     * @return The total number of items that were deleted from IMRT because they no longer exist in source control
     */
    public int getNumberOfItemsDeletedFromImrt() {
        return numberOfItemsDeletedFromImrt;
    }

    @Override
    public String toString() {
        return String.format("Total item bank ids: %d, number of items requiring project webhook: %d, number of items deleted from IMRT: %d",
                getNumberOfItembankIds(),
                getNumberOfItemsWithoutWebhook(),
                getNumberOfItemsDeletedFromImrt());
    }
}
