package org.opentestsystem.ap.imrt.iis.builder;

import org.opentestsystem.ap.imrt.common.model.ImrtItem;
import org.opentestsystem.ap.imrt.common.model.ItemLog;
import org.opentestsystem.ap.imrt.common.model.ItemLogKey;

import java.time.Instant;

public class ItemLogBuilder {
    private ImrtItem imrtItem;
    private String commitHash;
    private String ingestSource = "create_user";

    /**
     * Sets the imrtItem
     * @param imrtItem  the imrtItem
     * @return a reference to this object
     */
    public ItemLogBuilder withImrtItem(ImrtItem imrtItem) {
        this.imrtItem = imrtItem;
        return this;
    }

    /**
     * Sets the commitHash
     * @param commitHash  the type value
     * @return a reference to this object
     */
    public ItemLogBuilder withCommitHash(String commitHash) {
        this.commitHash = commitHash;
        return this;
    }

    public ItemLogBuilder withIngestSource(String ingestSource) {
        this.ingestSource = ingestSource;
        return this;
    }

    /**
     * Generate an ItemLog object
     * @return an ItemLog object
     */
    public ItemLog build() {
        ItemLogKey key = new ItemLogKey(imrtItem, commitHash);
        ItemLog log = new ItemLog();
        log.setItemLogKey(key);
        log.setCommitDate(Instant.now());
        log.setIngestSource(ingestSource);
        log.setUpdatedBy("me");
        return log;
    }
}
