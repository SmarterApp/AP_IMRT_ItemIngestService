package org.opentestsystem.ap.imrt.iis.builder;

import org.opentestsystem.ap.common.imrt.model.BaseItem;
import org.opentestsystem.ap.common.imrt.model.ItemLog;
import org.opentestsystem.ap.common.imrt.model.ItemLogKey;

import java.time.Instant;

public class ItemLogBuilder {
    private BaseItem item;
    private String commitHash;
    private String ingestSource = "create_user";
    private Instant commitDate = Instant.now();

    public static ItemLogBuilder builder() {
        return new ItemLogBuilder();
    }

    public ItemLogBuilder withItem(BaseItem item) {
        this.item = item;
        return this;
    }

    public ItemLogBuilder withCommitHash(String commitHash) {
        this.commitHash = commitHash;
        return this;
    }

    public ItemLogBuilder withIngestSource(String ingestSource) {
        this.ingestSource = ingestSource;
        return this;
    }

    public ItemLogBuilder withCommitDate(Instant commitDate) {
        this.commitDate = commitDate;
        return this;
    }

    /**
     * Generate an ItemLog object
     *
     * @return an ItemLog object
     */
    public ItemLog build() {
        ItemLogKey key = new ItemLogKey(item, commitHash);
        ItemLog log = new ItemLog();
        log.setItemLogKey(key);
        log.setCommitDate(commitDate);
        log.setIngestSource(ingestSource);
        log.setUpdatedBy("me");
        return log;
    }
}
